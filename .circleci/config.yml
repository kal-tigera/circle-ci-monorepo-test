version: 2.1

orbs:
  path-filtering: circleci/path-filtering@1.1.0

executors:
  default:
    docker:
      - image: circleci/node:14

jobs:
  build_project1:
    executor: default
    steps:
      - checkout
      - run: echo "Building Project 1"

  build_project2:
    executor: default
    steps:
      - checkout
      - run: echo "Building Project 2"

  build_shared:
    executor: default
    steps:
      - checkout
      - run: echo "Building Shared Dependencies"

workflows:
  version: 2
  project_workflows:
    jobs:
      - path-filtering/filter:
          base-revision: main
          mapping:
            project1/.*: build_project1
            project2/.*: build_project2
            shared/.*: build_shared
